# DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO
meta:
  version: PTDL_v1
exported_at: '2020-04-12T16:00:51-07:00'
name: Bungeecord
author: support@pterodactyl.io
description: 'For a long time, Minecraft server owners have had a dream that encompasses a free, easy, and reliable way to connect multiple Minecraft servers together. BungeeCord is the answer to said dream. Whether you are a small server wishing to string multiple game-modes together, or the owner of the ShotBow Network, BungeeCord is the ideal solution for you. With the help of BungeeCord, you will be able to unlock your community''s full potential.'
image: 'quay.io/pterodactyl/core:java'
startup: 'java -Xms128M -Xmx{{SERVER_MEMORY}}M -jar {{SERVER_JARFILE}}'
config:
  files: |
    {
        "config.yml": {
            "parser": "yaml",
            "find": {
                "listeners[0].query_enabled": true,
                "listeners[0].query_port": "{{server.build.default.port}}",
                "listeners[0].host": "0.0.0.0:{{server.build.default.port}}",
                "servers.*.address": {
                    "regex:^(127\\.0\\.0\\.1|localhost)(:\\d{1,5})?$": "{{config.docker.interface}}$2"
                }
            }
        }
    }
  startup: |
    {
        "done": "Listening on ",
        "userInteraction": [
            "Listening on /0.0.0.0:25577"
        ]
    }
  logs: |
    {
        "custom": false,
        "location": "proxy.log.0"
    }
  stop: end
scripts:
  installation:
    script: |
      #!/bin/ash
      # Bungeecord Installation Script
      #
      # Server Files: /mnt/server
      apk update
      apk add curl
      
      cd /mnt/server
      
      if [ -z "${BUNGEE_VERSION}" ] || [ "${BUNGEE_VERSION}" == "latest" ]; then
          BUNGEE_VERSION="lastStableBuild"
      fi
      
      curl -o ${SERVER_JARFILE} https://ci.md-5.net/job/BungeeCord/${BUNGEE_VERSION}/artifact/bootstrap/target/BungeeCord.jar
    container: 'alpine:3.9'
    entrypoint: ash
variables:
  -
    name: 'Bungeecord Version'
    description: 'The version of Bungeecord to download and use.'
    env_variable: BUNGEE_VERSION
    default_value: latest
    user_viewable: 1
    user_editable: 1
    rules: 'required|alpha_num|between:1,6'
  -
    name: 'Bungeecord Jar File'
    description: 'The name of the Jarfile to use when running Bungeecord.'
    env_variable: SERVER_JARFILE
    default_value: bungeecord.jar
    user_viewable: 1
    user_editable: 1
    rules: 'required|regex:/^([\w\d._-]+)(\.jar)$/'
